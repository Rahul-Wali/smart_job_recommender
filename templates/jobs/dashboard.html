{% extends 'base.html' %}

{% block title %}Dashboard - Smart Job Recommender{% endblock %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <!-- Welcome Header -->
    <div class="hero">
        <h1>Welcome, {{ user.first_name }}! üëã</h1>
        <p>Your personalized job recommendation dashboard</p>
        <a href="{% url 'jobs:recommendations' %}" class="btn btn-secondary btn-lg">Get Job Recommendations</a>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <span class="stat-value">{{ total_jobs }}</span>
            <span class="stat-label">Available Jobs</span>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #10b981, #059669);">
            <span class="stat-value">{{ profile.get_skills_list|length }}</span>
            <span class="stat-label">Your Skills</span>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
            <span class="stat-value">AI</span>
            <span class="stat-label">Powered Matching</span>
        </div>
    </div>

    <!-- Profile Summary -->
    <div class="grid grid-2" style="margin-top: 2rem;">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Your Profile</h2>
            </div>
            <div class="card-body">
                <div style="margin-bottom: 1rem;">
                    <strong style="color: var(--text-primary);">Name:</strong>
                    <p style="margin: 0.25rem 0 0 0;">{{ user.get_full_name }}</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong style="color: var(--text-primary);">Email:</strong>
                    <p style="margin: 0.25rem 0 0 0;">{{ user.email }}</p>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong style="color: var(--text-primary);">Your Skills:</strong>
                    <div style="margin-top: 0.5rem;">
                        {% if profile.get_skills_list %}
                            {% for skill in profile.get_skills_list %}
                                <span class="skill-tag">{{ skill }}</span>
                            {% endfor %}
                        {% else %}
                            <p style="color: var(--text-light); margin: 0;">No skills added yet.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <a href="{% url 'accounts:profile' %}" class="btn btn-outline btn-sm">Edit Profile</a>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Quick Actions</h2>
            </div>
            <div class="card-body">
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <a href="{% url 'jobs:recommendations' %}" class="btn btn-primary btn-block">
                        üéØ Get Job Recommendations
                    </a>
                    <a href="{% url 'jobs:job_list' %}" class="btn btn-outline btn-block">
                        üìã Browse All Jobs
                    </a>
                    <a href="{% url 'accounts:profile' %}" class="btn btn-outline btn-block">
                        üë§ Update Profile
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Jobs -->
    <div style="margin-top: 2rem;">
        <h2>Recent Job Postings</h2>
        {% if recent_jobs %}
            <div class="grid grid-2" style="margin-top: 1rem;">
                {% for job in recent_jobs %}
                <div class="job-card" onclick="window.location='{% url 'jobs:job_detail' job.id %}'">
                    <div class="job-card-header">
                        <div>
                            <h3 class="job-title">{{ job.title }}</h3>
                            <p class="job-company">{{ job.company }}</p>
                        </div>
                    </div>
                    <div class="job-meta">
                        <span>üìç {{ job.location }}</span>
                        {% if job.salary_range %}
                        <span>üí∞ {{ job.salary_range }}</span>
                        {% endif %}
                    </div>
                    <p class="job-description">{{ job.get_short_description }}</p>
                    <div class="job-skills">
                        {% for skill in job.get_skills_list|slice:":5" %}
                            <span class="skill-tag skill-tag-outline">{{ skill }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <div style="text-align: center; margin-top: 1.5rem;">
                <a href="{% url 'jobs:job_list' %}" class="btn btn-outline">View All Jobs</a>
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-state-icon">üì≠</div>
                <h3 class="empty-state-title">No jobs available</h3>
                <p class="empty-state-description">Check back later for new opportunities!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
